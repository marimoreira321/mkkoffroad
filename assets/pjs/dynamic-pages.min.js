(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var onRequest = false;
var data = {
    sections: Array,
    sectionEditing: false,
    currSectionTitle: "",
    subsectionTitleEditing: false,
    currSubsectionTitle: "",
    subsectionContentEditing: false,
    currSubsectionContent: "",
    currDeleting: "",
    currSubsectionDeleting: "",
    isAuth: Boolean,
    ref: "0"
};
var page = new Vue({
    el: "#dynamic-page",
    data: data,
    methods: {
        getSections: function getSections() {
            $.post('/api/pages', {
                exec: 'get_sections',
                routeName: window.location.pathname.substr(1)
            }, null, 'json').then(function (r) {
                data.sections = r;
            });
        },
        tinyMCE: function (_tinyMCE) {
            function tinyMCE(_x) {
                return _tinyMCE.apply(this, arguments);
            }

            tinyMCE.toString = function () {
                return _tinyMCE.toString();
            };

            return tinyMCE;
        }(function (action) {
            var id = 'txa_' + data.subsectionContentEditing;
            if (action == 'start') {
                for (var i = tinymce.editors.length - 1; i > -1; i--) {
                    var ed_id = tinymce.editors[i].remove();
                }
                setTimeout(function () {
                    tinymce.init({
                        selector: '#' + id,
                        height: 200,
                        plugins: ['media', 'image', 'code', 'fontawesome noneditable'],
                        image_caption: true,
                        content_css: 'https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css',
                        noneditable_noneditable_class: 'fa',
                        toolbar: 'fontawesome',
                        extended_valid_elements: 'span[*]',
                        setup: function setup(e) {
                            e.on('init', function (e) {
                                tinymce.get(id).setContent(data.currSubsectionContent);
                            });
                        }
                    });
                }, 200);
            }
            if (action == 'finish') {
                tinyMCE.get(id).remove();
                data.subsectionContentEditing = false;
            }
        }),
        printData: function printData() {
            console.log(this.isAuth);
        },
        changeSectionTitle: function changeSectionTitle(idx) {
            $.post('/api/pages', {
                exec: 'update_section_name',
                id: data.sectionEditing,
                title: data.currSectionTitle
            }, null, 'json').then(function (r) {
                if ('erro' in r) {
                    simpleAlert.show({
                        message: 'Algo deu errado ao atualizar..'
                    });
                } else {
                    simpleAlert.show({
                        message: 'Título atualizado com sucesso!',
                        type: 'success'
                    });
                }
            });
            data.sections[idx].name = data.currSectionTitle;
            data.currSectionTitle = "";
            data.sectionEditing = false;
        },
        changeSubsectionTitle: function changeSubsectionTitle(idx, ids) {
            $.post('/api/pages', {
                exec: 'update_subsection_title',
                id: data.subsectionTitleEditing,
                title: data.currSubsectionTitle
            }, null, 'json').then(function (r) {
                if ('erro' in r) {
                    simpleAlert.show({
                        message: 'Algo deu errado ao atualizar..'
                    });
                } else {
                    simpleAlert.show({
                        message: 'Título da subseção atualizado com sucesso!',
                        type: 'success'
                    });
                }
            });
            data.sections[idx].subsections[ids].title = data.currSubsectionTitle;
            data.currSubsectionTitle = "";
            data.subsectionTitleEditing = false;
        },
        changeSubsectionContent: function changeSubsectionContent(idx, ids) {
            if (onRequest) return false;
            onRequest = true;
            data.currSubsectionContent = tinyMCE.get('txa_' + data.subsectionContentEditing).getContent();
            $.post('/api/pages', {
                exec: 'update_subsection_content',
                id: data.subsectionContentEditing,
                content: data.currSubsectionContent
            }, null, 'json').then(function (r) {
                if ('erro' in r) {
                    simpleAlert.show({
                        message: 'Algo deu errado ao atualizar..'
                    });
                } else {
                    simpleAlert.show({
                        message: 'Conteúdo da seção atualizado com sucesso!',
                        type: 'success'
                    });
                }
                onRequest = false;
            });
            page.tinyMCE('finish');
            data.sections[idx].subsections[ids].content = data.currSubsectionContent;
            data.currSubsectionContent = "";
            data.subsectionContentEditing = false;
        },
        addSection: function addSection() {
            if (onRequest) return false;
            onRequest = true;
            var d = new Date();
            var section = {
                sectionName: "Nova Seção",
                name: "Nova Seção",
                subsections: [{
                    ssTitle: "Título da Subseção",
                    ssContent: "Conteúdo da subseção",
                    title: "Título da Subseção",
                    content: "Conteúdo da subseção",
                    id: d.getTime()
                }],
                id: d.getTime(),
                ref: data.ref
            };
            $.post('/api/pages', {
                exec: 'add_new_section',
                data: section
            }, null, 'json').then(function (r) {
                page.getSections();
                if ('erro' in r) {
                    simpleAlert.show({
                        message: 'Houve um problema ao adicionar a seção..'
                    });
                }
                onRequest = false;
            });
        },
        deleteSection: function deleteSection(idx) {
            var confirm = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

            data.currDeleting = idx;
            $('#confirm_modal').modal('show');
            if (confirm == true) {
                $.post('/api/pages', {
                    exec: 'remove_section',
                    ref: data.sections[idx].id
                }, null, 'json').then(function (r) {
                    if ('erro' in r) {
                        simpleAlert.show({
                            message: "Houve um porblema ao excluir a seção. Por favor, tente novamente."
                        });
                    } else {
                        data.sections.splice(idx, 1);
                        data.currDeleting = "";
                        simpleAlert.show({
                            message: "Seção excluída com sucesso!",
                            type: 'success'
                        });
                    }
                });
                $('#confirm_modal').modal('hide');
            }
        },

        deleteSubsection: function deleteSubsection(idx, ids) {
            var confirm = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

            data.currDeleting = idx;
            data.currSubsectionDeleting = ids;
            $('#confirm_subsection_modal').modal('show');
            if (confirm == true) {
                $.post('/api/pages', {
                    exec: 'remove_subsection',
                    ref: data.sections[idx].subsections[ids].id
                }, null, 'json').then(function (r) {
                    if ('erro' in r) {
                        simpleAlert.show({
                            message: "Houve um porblema ao excluir esta subseção. Por favor, tente novamente."
                        });
                    } else {
                        data.sections[idx].subsections.splice(ids, 1);
                        data.currDeleting = "";
                        simpleAlert.show({
                            message: "Subseção excluída com sucesso!",
                            type: 'success'
                        });
                    }
                });
                $('#confirm_subsection_modal').modal('hide');
            }
        },
        addSubsection: function addSubsection(idx) {
            if (onRequest) return false;
            onRequest = true;
            var d = new Date();
            var subsection = {
                ssTitle: "Título da Subseção",
                ssContent: "Conteúdo da subseção",
                id: d.getTime(),
                ref: data.sections[idx].id
            };
            $.post('/api/pages', {
                exec: 'add_new_subsection',
                data: subsection
            }, null, 'json').then(function (r) {
                page.getSections();
                if ('erro' in r) {
                    simpleAlert.show({
                        message: 'Houve um problema ao adicionar a seção..'
                    });
                }
                onRequest = false;
            });
        },
        swapSections: function swapSections(idx) {
            if (data.onRequest) return false;

            data.onRequest = true;
            $.post('/api/pages', {
                exec: 'swap_sections_position',
                sections: [{
                    id: data.sections[idx].id,
                    position: idx - 1
                }, {
                    id: data.sections[idx - 1].id,
                    position: idx
                }]
            }, null, 'json').then(function (r) {

                if ('erro' in r) {
                    simpleAlert.show({
                        message: 'Houve um problema ao executar esta ação..'
                    });
                } else {
                    data.sections[idx].position--;
                    data.sections[idx - 1].position++;
                    data.sections.splice(idx - 1, 2, data.sections[idx], data.sections[idx - 1]);
                }
                data.onRequest = false;
            });
        }
    },

    created: function created() {
        this.getSections();
    }
});

var head = {
    header: Array,
    currHeaderTitle: "",
    currHeaderSubtitle: "",
    editingHeaderTitle: false,
    editingHeaderSubtitle: false,
    isAuth: Boolean
};

var header = new Vue({
    el: '#main-header',
    data: head,
    methods: {
        getPage: function getPage() {
            $.post('/api/pages', {
                exec: 'get_page',
                route: window.location.pathname.substr(1)
            }, null, 'json').then(function (r) {
                head.header = r[0];
                data.ref = r[0].id;
            });
        },
        changeHeaderTitle: function changeHeaderTitle() {
            $.post('/api/pages', {
                exec: 'update_header_title',
                id: head.header.id,
                title: head.currHeaderTitle
            }, null, 'json').then(function (r) {
                if ('erro' in r) {
                    simpleAlert.show({
                        message: 'Algo deu errado ao atualizar..'
                    });
                } else {
                    simpleAlert.show({
                        message: 'Título da página atualizado com sucesso!',
                        type: 'success'
                    });
                }
            });
            head.header.title = head.currHeaderTitle;
            head.currHeaderTitle = "";
            head.editingHeaderTitle = false;
        },
        changeHeaderSubtitle: function changeHeaderSubtitle() {
            $.post('/api/pages', {
                exec: 'update_header_subtitle',
                id: head.header.id,
                subtitle: head.currHeaderSubtitle
            }, null, 'json').then(function (r) {
                if ('erro' in r) {
                    simpleAlert.show({
                        message: 'Algo deu errado ao atualizar..'
                    });
                } else {
                    simpleAlert.show({
                        message: 'Subtítulo da página atualizado com sucesso!',
                        type: 'success'
                    });
                }
            });
            head.header.subtitle = head.currHeaderSubtitle;
            head.currHeaderSubtitle = "";
            head.editingHeaderSubtitle = false;
        },

        printData: function printData() {
            console.log(head.header);
        }

    },
    created: function created() {
        this.getPage();
        setInterval(function () {
            if (data.isAuth !== auth) {
                data.isAuth = auth;
                head.isAuth = auth;
            }
        }, 100);
    }
});

function getResponse(r) {
    return r;
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvanMvZHluYW1pYy1wYWdlcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQ0EsSUFBSSxZQUFZLEtBQWhCO0FBQ0EsSUFBSSxPQUFPO0FBQ1AsY0FBVSxLQURIO0FBRVAsb0JBQWdCLEtBRlQ7QUFHUCxzQkFBa0IsRUFIWDtBQUlQLDRCQUF3QixLQUpqQjtBQUtQLHlCQUFxQixFQUxkO0FBTVAsOEJBQTBCLEtBTm5CO0FBT1AsMkJBQXVCLEVBUGhCO0FBUVAsa0JBQWMsRUFSUDtBQVNQLDRCQUF3QixFQVRqQjtBQVVQLFlBQVEsT0FWRDtBQVdQLFNBQUs7QUFYRSxDQUFYO0FBYUEsSUFBSSxPQUFPLElBQUksR0FBSixDQUFRO0FBQ2YsUUFBSSxlQURXO0FBRWYsVUFBTSxJQUZTO0FBR2YsYUFBUztBQUNMLHFCQUFhLHVCQUFZO0FBQ3JCLGNBQUUsSUFBRixDQUFPLFlBQVAsRUFBcUI7QUFDakIsc0JBQU0sY0FEVztBQUVqQiwyQkFBVyxPQUFPLFFBQVAsQ0FBZ0IsUUFBaEIsQ0FBeUIsTUFBekIsQ0FBZ0MsQ0FBaEM7QUFGTSxhQUFyQixFQUdHLElBSEgsRUFHUyxNQUhULEVBR2lCLElBSGpCLENBR3NCLFVBQVUsQ0FBVixFQUFhO0FBQy9CLHFCQUFLLFFBQUwsR0FBZ0IsQ0FBaEI7QUFDSCxhQUxEO0FBTUgsU0FSSTtBQVNMO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBLFVBQVMsVUFBVSxNQUFWLEVBQWtCO0FBQ3ZCLGdCQUFJLEtBQUssU0FBUyxLQUFLLHdCQUF2QjtBQUNBLGdCQUFJLFVBQVUsT0FBZCxFQUF1QjtBQUNuQixxQkFBSyxJQUFJLElBQUksUUFBUSxPQUFSLENBQWdCLE1BQWhCLEdBQXlCLENBQXRDLEVBQTBDLElBQUksQ0FBQyxDQUEvQyxFQUFtRCxHQUFuRCxFQUF3RDtBQUNwRCx3QkFBSSxRQUFRLFFB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dCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJcbnZhciBvblJlcXVlc3QgPSBmYWxzZTtcbnZhciBkYXRhID0ge1xuICAgIHNlY3Rpb25zOiBBcnJheSxcbiAgICBzZWN0aW9uRWRpdGluZzogZmFsc2UsXG4gICAgY3VyclNlY3Rpb25UaXRsZTogXCJcIixcbiAgICBzdWJzZWN0aW9uVGl0bGVFZGl0aW5nOiBmYWxzZSxcbiAgICBjdXJyU3Vic2VjdGlvblRpdGxlOiBcIlwiLFxuICAgIHN1YnNlY3Rpb25Db250ZW50RWRpdGluZzogZmFsc2UsXG4gICAgY3VyclN1YnNlY3Rpb25Db250ZW50OiBcIlwiLFxuICAgIGN1cnJEZWxldGluZzogXCJcIixcbiAgICBjdXJyU3Vic2VjdGlvbkRlbGV0aW5nOiBcIlwiLFxuICAgIGlzQXV0aDogQm9vbGVhbixcbiAgICByZWY6IFwiMFwiXG59XG52YXIgcGFnZSA9IG5ldyBWdWUoe1xuICAgIGVsOiBcIiNkeW5hbWljLXBhZ2VcIixcbiAgICBkYXRhOiBkYXRhLFxuICAgIG1ldGhvZHM6IHtcbiAgICAgICAgZ2V0U2VjdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQucG9zdCgnL2FwaS9wYWdlcycsIHtcbiAgICAgICAgICAgICAgICBleGVjOiAnZ2V0X3NlY3Rpb25zJyxcbiAgICAgICAgICAgICAgICByb3V0ZU5hbWU6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zdWJzdHIoMSlcbiAgICAgICAgICAgIH0sIG51bGwsICdqc29uJykudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgIGRhdGEuc2VjdGlvbnMgPSByO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRpbnlNQ0U6IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciBpZCA9ICd0eGFfJyArIGRhdGEuc3Vic2VjdGlvbkNvbnRlbnRFZGl0aW5nO1xuICAgICAgICAgICAgaWYgKGFjdGlvbiA9PSAnc3RhcnQnKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRpbnltY2UuZWRpdG9ycy5sZW5ndGggLSAxIDsgaSA+IC0xIDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlZF9pZCA9IHRpbnltY2UuZWRpdG9yc1tpXS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbnltY2UuaW5pdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvcjogJyMnICsgaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbnM6IFsnbWVkaWEnLCAnaW1hZ2UnLCAnY29kZScsICdmb250YXdlc29tZSBub25lZGl0YWJsZSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VfY2FwdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRfY3NzOiAnaHR0cHM6Ly9uZXRkbmEuYm9vdHN0cmFwY2RuLmNvbS9mb250LWF3ZXNvbWUvNC43LjAvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vbmVkaXRhYmxlX25vbmVkaXRhYmxlX2NsYXNzOiAnZmEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhcjogJ2ZvbnRhd2Vzb21lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZGVkX3ZhbGlkX2VsZW1lbnRzOiAnc3BhblsqXScsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm9uKCdpbml0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbnltY2UuZ2V0KGlkKS5zZXRDb250ZW50KGRhdGEuY3VyclN1YnNlY3Rpb25Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWN0aW9uID09ICdmaW5pc2gnKSB7XG4gICAgICAgICAgICAgICAgdGlueU1DRS5nZXQoaWQpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGRhdGEuc3Vic2VjdGlvbkNvbnRlbnRFZGl0aW5nID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcHJpbnREYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmlzQXV0aCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNoYW5nZVNlY3Rpb25UaXRsZTogZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgJC5wb3N0KCcvYXBpL3BhZ2VzJywge1xuICAgICAgICAgICAgICAgIGV4ZWM6ICd1cGRhdGVfc2VjdGlvbl9uYW1lJyxcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5zZWN0aW9uRWRpdGluZyxcbiAgICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jdXJyU2VjdGlvblRpdGxlXG4gICAgICAgICAgICB9LCBudWxsLCAnanNvbicpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICBpZiAoJ2Vycm8nIGluIHIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2ltcGxlQWxlcnQuc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQWxnbyBkZXUgZXJyYWRvIGFvIGF0dWFsaXphci4uJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2ltcGxlQWxlcnQuc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVMOtdHVsbyBhdHVhbGl6YWRvIGNvbSBzdWNlc3NvIScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRhdGEuc2VjdGlvbnNbaWR4XS5uYW1lID0gZGF0YS5jdXJyU2VjdGlvblRpdGxlO1xuICAgICAgICAgICAgZGF0YS5jdXJyU2VjdGlvblRpdGxlID0gXCJcIjtcbiAgICAgICAgICAgIGRhdGEuc2VjdGlvbkVkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hhbmdlU3Vic2VjdGlvblRpdGxlOiBmdW5jdGlvbiAoaWR4LCBpZHMpIHtcbiAgICAgICAgICAgICQucG9zdCgnL2FwaS9wYWdlcycsIHtcbiAgICAgICAgICAgICAgICBleGVjOiAndXBkYXRlX3N1YnNlY3Rpb25fdGl0bGUnLFxuICAgICAgICAgICAgICAgIGlkOiBkYXRhLnN1YnNlY3Rpb25UaXRsZUVkaXRpbmcsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGRhdGEuY3VyclN1YnNlY3Rpb25UaXRsZVxuICAgICAgICAgICAgfSwgbnVsbCwgJ2pzb24nKS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdlcnJvJyBpbiByKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbXBsZUFsZXJ0LnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0FsZ28gZGV1IGVycmFkbyBhbyBhdHVhbGl6YXIuLicsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbXBsZUFsZXJ0LnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1TDrXR1bG8gZGEgc3Vic2XDp8OjbyBhdHVhbGl6YWRvIGNvbSBzdWNlc3NvIScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRhdGEuc2VjdGlvbnNbaWR4XS5zdWJzZWN0aW9uc1tpZHNdLnRpdGxlID0gZGF0YS5jdXJyU3Vic2VjdGlvblRpdGxlO1xuICAgICAgICAgICAgZGF0YS5jdXJyU3Vic2VjdGlvblRpdGxlID0gXCJcIjtcbiAgICAgICAgICAgIGRhdGEuc3Vic2VjdGlvblRpdGxlRWRpdGluZyA9IGZhbHNlO1xuICAgICAgICB9LFxuICAgICAgICBjaGFuZ2VTdWJzZWN0aW9uQ29udGVudDogZnVuY3Rpb24gKGlkeCwgaWRzKSB7XG4gICAgICAgICAgICBpZiAob25SZXF1ZXN0KSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBvblJlcXVlc3QgPSB0cnVlO1xuICAgICAgICAgICAgZGF0YS5jdXJyU3Vic2VjdGlvbkNvbnRlbnQgPSB0aW55TUNFLmdldCgndHhhXycgKyBkYXRhLnN1YnNlY3Rpb25Db250ZW50RWRpdGluZykuZ2V0Q29udGVudCgpO1xuICAgICAgICAgICAgJC5wb3N0KCcvYXBpL3BhZ2VzJywge1xuICAgICAgICAgICAgICAgIGV4ZWM6ICd1cGRhdGVfc3Vic2VjdGlvbl9jb250ZW50JyxcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5zdWJzZWN0aW9uQ29udGVudEVkaXRpbmcsXG4gICAgICAgICAgICAgICAgY29udGVudDogZGF0YS5jdXJyU3Vic2VjdGlvbkNvbnRlbnRcbiAgICAgICAgICAgIH0sIG51bGwsICdqc29uJykudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgIGlmICgnZXJybycgaW4gcikge1xuICAgICAgICAgICAgICAgICAgICBzaW1wbGVBbGVydC5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdBbGdvIGRldSBlcnJhZG8gYW8gYXR1YWxpemFyLi4nLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzaW1wbGVBbGVydC5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb250ZcO6ZG8gZGEgc2XDp8OjbyBhdHVhbGl6YWRvIGNvbSBzdWNlc3NvIScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb25SZXF1ZXN0ID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBhZ2UudGlueU1DRSgnZmluaXNoJyk7XG4gICAgICAgICAgICBkYXRhLnNlY3Rpb25zW2lkeF0uc3Vic2VjdGlvbnNbaWRzXS5jb250ZW50ID0gZGF0YS5jdXJyU3Vic2VjdGlvbkNvbnRlbnQ7XG4gICAgICAgICAgICBkYXRhLmN1cnJTdWJzZWN0aW9uQ29udGVudCA9IFwiXCI7XG4gICAgICAgICAgICBkYXRhLnN1YnNlY3Rpb25Db250ZW50RWRpdGluZyA9IGZhbHNlO1xuXG4gICAgICAgIH0sXG4gICAgICAgIGFkZFNlY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChvblJlcXVlc3QpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIG9uUmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB2YXIgc2VjdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uTmFtZTogXCJOb3ZhIFNlw6fDo29cIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcIk5vdmEgU2XDp8Ojb1wiLFxuICAgICAgICAgICAgICAgIHN1YnNlY3Rpb25zOiBbe1xuICAgICAgICAgICAgICAgICAgICBzc1RpdGxlOiBcIlTDrXR1bG8gZGEgU3Vic2XDp8Ojb1wiLFxuICAgICAgICAgICAgICAgICAgICBzc0NvbnRlbnQ6IFwiQ29udGXDumRvIGRhIHN1YnNlw6fDo29cIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiVMOtdHVsbyBkYSBTdWJzZcOnw6NvXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiQ29udGXDumRvIGRhIHN1YnNlw6fDo29cIixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGQuZ2V0VGltZSgpXG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgaWQ6IGQuZ2V0VGltZSgpLFxuICAgICAgICAgICAgICAgIHJlZjogZGF0YS5yZWZcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAkLnBvc3QoJy9hcGkvcGFnZXMnLCB7XG4gICAgICAgICAgICAgICAgZXhlYzogJ2FkZF9uZXdfc2VjdGlvbicsXG4gICAgICAgICAgICAgICAgZGF0YTogc2VjdGlvblxuICAgICAgICAgICAgfSwgbnVsbCwgJ2pzb24nKS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgcGFnZS5nZXRTZWN0aW9ucygpO1xuICAgICAgICAgICAgICAgIGlmICgnZXJybycgaW4gcikge1xuICAgICAgICAgICAgICAgICAgICBzaW1wbGVBbGVydC5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdIb3V2ZSB1bSBwcm9ibGVtYSBhbyBhZGljaW9uYXIgYSBzZcOnw6NvLi4nXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9uUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZVNlY3Rpb24oaWR4LCBjb25maXJtID0gZmFsc2UpIHtcbiAgICAgICAgICAgIGRhdGEuY3VyckRlbGV0aW5nID0gaWR4O1xuICAgICAgICAgICAgJCgnI2NvbmZpcm1fbW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgICAgICAgICAgaWYgKGNvbmZpcm0gPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICQucG9zdCgnL2FwaS9wYWdlcycsIHtcbiAgICAgICAgICAgICAgICAgICAgZXhlYzogJ3JlbW92ZV9zZWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiBkYXRhLnNlY3Rpb25zW2lkeF0uaWRcbiAgICAgICAgICAgICAgICB9LCBudWxsLCAnanNvbicpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCdlcnJvJyBpbiByKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaW1wbGVBbGVydC5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkhvdXZlIHVtIHBvcmJsZW1hIGFvIGV4Y2x1aXIgYSBzZcOnw6NvLiBQb3IgZmF2b3IsIHRlbnRlIG5vdmFtZW50ZS5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zZWN0aW9ucy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuY3VyckRlbGV0aW5nID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbXBsZUFsZXJ0LnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiU2XDp8OjbyBleGNsdcOtZGEgY29tIHN1Y2Vzc28hXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAkKCcjY29uZmlybV9tb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlbGV0ZVN1YnNlY3Rpb246IGZ1bmN0aW9uIChpZHgsIGlkcywgY29uZmlybSA9IGZhbHNlKSB7XG4gICAgICAgICAgICBkYXRhLmN1cnJEZWxldGluZyA9IGlkeDtcbiAgICAgICAgICAgIGRhdGEuY3VyclN1YnNlY3Rpb25EZWxldGluZyA9IGlkcztcbiAgICAgICAgICAgICQoJyNjb25maXJtX3N1YnNlY3Rpb25fbW9kYWwnKS5tb2RhbCgnc2hvdycpO1xuICAgICAgICAgICAgaWYgKGNvbmZpcm0gPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICQucG9zdCgnL2FwaS9wYWdlcycsIHtcbiAgICAgICAgICAgICAgICAgICAgZXhlYzogJ3JlbW92ZV9zdWJzZWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgcmVmOiBkYXRhLnNlY3Rpb25zW2lkeF0uc3Vic2VjdGlvbnNbaWRzXS5pZFxuICAgICAgICAgICAgICAgIH0sIG51bGwsICdqc29uJykudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJ2Vycm8nIGluIHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbXBsZUFsZXJ0LnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSG91dmUgdW0gcG9yYmxlbWEgYW8gZXhjbHVpciBlc3RhIHN1YnNlw6fDo28uIFBvciBmYXZvciwgdGVudGUgbm92YW1lbnRlLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnNlY3Rpb25zW2lkeF0uc3Vic2VjdGlvbnMuc3BsaWNlKGlkcywgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmN1cnJEZWxldGluZyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaW1wbGVBbGVydC5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlN1YnNlw6fDo28gZXhjbHXDrWRhIGNvbSBzdWNlc3NvIVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKCcjY29uZmlybV9zdWJzZWN0aW9uX21vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgYWRkU3Vic2VjdGlvbjogZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgaWYgKG9uUmVxdWVzdCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgb25SZXF1ZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHZhciBzdWJzZWN0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBzc1RpdGxlOiBcIlTDrXR1bG8gZGEgU3Vic2XDp8Ojb1wiLFxuICAgICAgICAgICAgICAgICAgICBzc0NvbnRlbnQ6IFwiQ29udGXDumRvIGRhIHN1YnNlw6fDo29cIixcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGQuZ2V0VGltZSgpLFxuICAgICAgICAgICAgICAgICAgICByZWY6IGRhdGEuc2VjdGlvbnNbaWR4XS5pZFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAkLnBvc3QoJy9hcGkvcGFnZXMnLCB7XG4gICAgICAgICAgICAgICAgZXhlYzogJ2FkZF9uZXdfc3Vic2VjdGlvbicsXG4gICAgICAgICAgICAgICAgZGF0YTogc3Vic2VjdGlvblxuICAgICAgICAgICAgfSwgbnVsbCwgJ2pzb24nKS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgcGFnZS5nZXRTZWN0aW9ucygpO1xuICAgICAgICAgICAgICAgIGlmICgnZXJybycgaW4gcikge1xuICAgICAgICAgICAgICAgICAgICBzaW1wbGVBbGVydC5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdIb3V2ZSB1bSBwcm9ibGVtYSBhbyBhZGljaW9uYXIgYSBzZcOnw6NvLi4nXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9uUmVxdWVzdCA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHN3YXBTZWN0aW9uczogZnVuY3Rpb24oaWR4KVxuICAgICAgICB7XG4gICAgICAgICAgICBpZihkYXRhLm9uUmVxdWVzdCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICBkYXRhLm9uUmVxdWVzdCA9IHRydWU7XG4gICAgICAgICAgICAkLnBvc3QoJy9hcGkvcGFnZXMnLCB7XG4gICAgICAgICAgICAgICAgZXhlYzogJ3N3YXBfc2VjdGlvbnNfcG9zaXRpb24nLFxuICAgICAgICAgICAgICAgIHNlY3Rpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkYXRhLnNlY3Rpb25zW2lkeF0uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogaWR4LTEsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkYXRhLnNlY3Rpb25zW2lkeC0xXS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBpZHhcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF0gICAgXG4gICAgICAgICAgICB9LCBudWxsLCAnanNvbicpLnRoZW4oZnVuY3Rpb24ocil7XG5cbiAgICAgICAgICAgICAgICBpZignZXJybycgaW4gcil7XG4gICAgICAgICAgICAgICAgICAgIHNpbXBsZUFsZXJ0LnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0hvdXZlIHVtIHByb2JsZW1hIGFvIGV4ZWN1dGFyIGVzdGEgYcOnw6NvLi4nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBkYXRhLnNlY3Rpb25zW2lkeF0ucG9zaXRpb24tLTsgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnNlY3Rpb25zW2lkeC0xXS5wb3NpdGlvbisrOyAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc2VjdGlvbnMuc3BsaWNlKGlkeC0xLCAyLCBkYXRhLnNlY3Rpb25zW2lkeF0sIGRhdGEuc2VjdGlvbnNbaWR4LTFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGF0YS5vblJlcXVlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5nZXRTZWN0aW9ucygpO1xuICAgIH1cbn0pO1xuXG5cbnZhciBoZWFkID0ge1xuICAgIGhlYWRlcjogQXJyYXksXG4gICAgY3VyckhlYWRlclRpdGxlOiBcIlwiLFxuICAgIGN1cnJIZWFkZXJTdWJ0aXRsZTogXCJcIixcbiAgICBlZGl0aW5nSGVhZGVyVGl0bGU6IGZhbHNlLFxuICAgIGVkaXRpbmdIZWFkZXJTdWJ0aXRsZTogZmFsc2UsXG4gICAgaXNBdXRoOiBCb29sZWFuXG59XG5cbnZhciBoZWFkZXIgPSBuZXcgVnVlKHtcbiAgICBlbDogJyNtYWluLWhlYWRlcicsXG4gICAgZGF0YTogaGVhZCxcbiAgICBtZXRob2RzOiB7XG4gICAgICAgIGdldFBhZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQucG9zdCgnL2FwaS9wYWdlcycsIHtcbiAgICAgICAgICAgICAgICBleGVjOiAnZ2V0X3BhZ2UnLFxuICAgICAgICAgICAgICAgIHJvdXRlOiB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3Vic3RyKDEpXG4gICAgICAgICAgICB9LCBudWxsLCAnanNvbicpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgICAgICAgICBoZWFkLmhlYWRlciA9IHJbMF07XG4gICAgICAgICAgICAgICAgZGF0YS5yZWYgPSByWzBdLmlkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNoYW5nZUhlYWRlclRpdGxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkLnBvc3QoJy9hcGkvcGFnZXMnLCB7XG4gICAgICAgICAgICAgICAgZXhlYzogJ3VwZGF0ZV9oZWFkZXJfdGl0bGUnLFxuICAgICAgICAgICAgICAgIGlkOiBoZWFkLmhlYWRlci5pZCxcbiAgICAgICAgICAgICAgICB0aXRsZTogaGVhZC5jdXJySGVhZGVyVGl0bGVcbiAgICAgICAgICAgIH0sIG51bGwsICdqc29uJykudGhlbihmdW5jdGlvbiAocikge1xuICAgICAgICAgICAgICAgIGlmICgnZXJybycgaW4gcikge1xuICAgICAgICAgICAgICAgICAgICBzaW1wbGVBbGVydC5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdBbGdvIGRldSBlcnJhZG8gYW8gYXR1YWxpemFyLi4nLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzaW1wbGVBbGVydC5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdUw610dWxvIGRhIHDDoWdpbmEgYXR1YWxpemFkbyBjb20gc3VjZXNzbyEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoZWFkLmhlYWRlci50aXRsZSA9IGhlYWQuY3VyckhlYWRlclRpdGxlO1xuICAgICAgICAgICAgaGVhZC5jdXJySGVhZGVyVGl0bGUgPSBcIlwiO1xuICAgICAgICAgICAgaGVhZC5lZGl0aW5nSGVhZGVyVGl0bGUgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgY2hhbmdlSGVhZGVyU3VidGl0bGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQucG9zdCgnL2FwaS9wYWdlcycsIHtcbiAgICAgICAgICAgICAgICBleGVjOiAndXBkYXRlX2hlYWRlcl9zdWJ0aXRsZScsXG4gICAgICAgICAgICAgICAgaWQ6IGhlYWQuaGVhZGVyLmlkLFxuICAgICAgICAgICAgICAgIHN1YnRpdGxlOiBoZWFkLmN1cnJIZWFkZXJTdWJ0aXRsZVxuICAgICAgICAgICAgfSwgbnVsbCwgJ2pzb24nKS50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdlcnJvJyBpbiByKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbXBsZUFsZXJ0LnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0FsZ28gZGV1IGVycmFkbyBhbyBhdHVhbGl6YXIuLicsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNpbXBsZUFsZXJ0LnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1N1YnTDrXR1bG8gZGEgcMOhZ2luYSBhdHVhbGl6YWRvIGNvbSBzdWNlc3NvIScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGhlYWQuaGVhZGVyLnN1YnRpdGxlID0gaGVhZC5jdXJySGVhZGVyU3VidGl0bGU7XG4gICAgICAgICAgICBoZWFkLmN1cnJIZWFkZXJTdWJ0aXRsZSA9IFwiXCI7XG4gICAgICAgICAgICBoZWFkLmVkaXRpbmdIZWFkZXJTdWJ0aXRsZSA9IGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIHByaW50RGF0YTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coaGVhZC5oZWFkZXIpO1xuXG4gICAgICAgIH1cblxuICAgIH0sXG4gICAgY3JlYXRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmdldFBhZ2UoKTtcbiAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGRhdGEuaXNBdXRoICE9PSBhdXRoKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5pc0F1dGggPSBhdXRoO1xuICAgICAgICAgICAgICAgIGhlYWQuaXNBdXRoID0gYXV0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwKVxuICAgIH1cbn0pXG5cbmZ1bmN0aW9uIGdldFJlc3BvbnNlKHIpIHtcbiAgICByZXR1cm4gcjtcbn0iXX0=
