/*! Grunt Uglify 2019-09-04 */

!function e(t,n,o){function i(a,r){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!r&&u)return u(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){"use strict";var o=!1,i={sections:Array,sectionEditing:!1,currSectionTitle:"",subsectionTitleEditing:!1,currSubsectionTitle:"",subsectionContentEditing:!1,currSubsectionContent:"",currDeleting:"",currSubsectionDeleting:"",isAuth:Boolean,ref:"0"},s=new Vue({el:"#dynamic-page",data:i,methods:{getSections:function(){$.post("/api/pages",{exec:"get_sections",routeName:window.location.pathname.substr(1)},null,"json").then(function(e){i.sections=e})},tinyMCE:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t="txa_"+i.subsectionContentEditing;if("start"==e){for(var n=tinymce.editors.length-1;n>-1;n--)tinymce.editors[n].remove();setTimeout(function(){tinymce.init({selector:"#"+t,height:200,plugins:["media","image","code","fontawesome noneditable"],image_caption:!0,content_css:"https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css",noneditable_noneditable_class:"fa",toolbar:"fontawesome",extended_valid_elements:"span[*]",setup:function(e){e.on("init",function(e){tinymce.get(t).setContent(i.currSubsectionContent)})}})},200)}"finish"==e&&(tinyMCE.get(t).remove(),i.subsectionContentEditing=!1)}),printData:function(){console.log(this.isAuth)},changeSectionTitle:function(e){$.post("/api/pages",{exec:"update_section_name",id:i.sectionEditing,title:i.currSectionTitle},null,"json").then(function(e){"erro"in e?simpleAlert.show({message:"Algo deu errado ao atualizar.."}):simpleAlert.show({message:"Título atualizado com sucesso!",type:"success"})}),i.sections[e].name=i.currSectionTitle,i.currSectionTitle="",i.sectionEditing=!1},changeSubsectionTitle:function(e,t){$.post("/api/pages",{exec:"update_subsection_title",id:i.subsectionTitleEditing,title:i.currSubsectionTitle},null,"json").then(function(e){"erro"in e?simpleAlert.show({message:"Algo deu errado ao atualizar.."}):simpleAlert.show({message:"Título da subseção atualizado com sucesso!",type:"success"})}),i.sections[e].subsections[t].title=i.currSubsectionTitle,i.currSubsectionTitle="",i.subsectionTitleEditing=!1},changeSubsectionContent:function(e,t){if(o)return!1;o=!0,i.currSubsectionContent=tinyMCE.get("txa_"+i.subsectionContentEditing).getContent(),$.post("/api/pages",{exec:"update_subsection_content",id:i.subsectionContentEditing,content:i.currSubsectionContent},null,"json").then(function(e){"erro"in e?simpleAlert.show({message:"Algo deu errado ao atualizar.."}):simpleAlert.show({message:"Conteúdo da seção atualizado com sucesso!",type:"success"}),o=!1}),s.tinyMCE("finish"),i.sections[e].subsections[t].content=i.currSubsectionContent,i.currSubsectionContent="",i.subsectionContentEditing=!1},addSection:function(){if(o)return!1;o=!0;var e=new Date,t={sectionName:"Nova Seção",name:"Nova Seção",subsections:[{ssTitle:"Título da Subseção",ssContent:"Conteúdo da subseção",title:"Título da Subseção",content:"Conteúdo da subseção",id:e.getTime()}],id:e.getTime(),ref:i.ref};$.post("/api/pages",{exec:"add_new_section",data:t},null,"json").then(function(e){s.getSections(),"erro"in e&&simpleAlert.show({message:"Houve um problema ao adicionar a seção.."}),o=!1})},deleteSection:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i.currDeleting=e,$("#confirm_modal").modal("show"),1==t&&($.post("/api/pages",{exec:"remove_section",ref:i.sections[e].id},null,"json").then(function(t){"erro"in t?simpleAlert.show({message:"Houve um porblema ao excluir a seção. Por favor, tente novamente."}):(i.sections.splice(e,1),i.currDeleting="",simpleAlert.show({message:"Seção excluída com sucesso!",type:"success"}))}),$("#confirm_modal").modal("hide"))},deleteSubsection:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.currDeleting=e,i.currSubsectionDeleting=t,$("#confirm_subsection_modal").modal("show"),1==n&&($.post("/api/pages",{exec:"remove_subsection",ref:i.sections[e].subsections[t].id},null,"json").then(function(n){"erro"in n?simpleAlert.show({message:"Houve um porblema ao excluir esta subseção. Por favor, tente novamente."}):(i.sections[e].subsections.splice(t,1),i.currDeleting="",simpleAlert.show({message:"Subseção excluída com sucesso!",type:"success"}))}),$("#confirm_subsection_modal").modal("hide"))},addSubsection:function(e){if(o)return!1;o=!0;var t={ssTitle:"Título da Subseção",ssContent:"Conteúdo da subseção",id:(new Date).getTime(),ref:i.sections[e].id};$.post("/api/pages",{exec:"add_new_subsection",data:t},null,"json").then(function(e){s.getSections(),"erro"in e&&simpleAlert.show({message:"Houve um problema ao adicionar a seção.."}),o=!1})},swapSections:function(e){if(i.onRequest)return!1;i.onRequest=!0,$.post("/api/pages",{exec:"swap_sections_position",sections:[{id:i.sections[e].id,position:e-1},{id:i.sections[e-1].id,position:e}]},null,"json").then(function(t){"erro"in t?simpleAlert.show({message:"Houve um problema ao executar esta ação.."}):(i.sections[e].position--,i.sections[e-1].position++,i.sections.splice(e-1,2,i.sections[e],i.sections[e-1])),i.onRequest=!1})}},created:function(){this.getSections()}}),a={header:Array,currHeaderTitle:"",currHeaderSubtitle:"",editingHeaderTitle:!1,editingHeaderSubtitle:!1,isAuth:Boolean};new Vue({el:"#main-header",data:a,methods:{getPage:function(){$.post("/api/pages",{exec:"get_page",route:window.location.pathname.substr(1)},null,"json").then(function(e){a.header=e[0],i.ref=e[0].id})},changeHeaderTitle:function(){$.post("/api/pages",{exec:"update_header_title",id:a.header.id,title:a.currHeaderTitle},null,"json").then(function(e){"erro"in e?simpleAlert.show({message:"Algo deu errado ao atualizar.."}):simpleAlert.show({message:"Título da página atualizado com sucesso!",type:"success"})}),a.header.title=a.currHeaderTitle,a.currHeaderTitle="",a.editingHeaderTitle=!1},changeHeaderSubtitle:function(){$.post("/api/pages",{exec:"update_header_subtitle",id:a.header.id,subtitle:a.currHeaderSubtitle},null,"json").then(function(e){"erro"in e?simpleAlert.show({message:"Algo deu errado ao atualizar.."}):simpleAlert.show({message:"Subtítulo da página atualizado com sucesso!",type:"success"})}),a.header.subtitle=a.currHeaderSubtitle,a.currHeaderSubtitle="",a.editingHeaderSubtitle=!1},printData:function(){console.log(a.header)}},created:function(){this.getPage(),setInterval(function(){i.isAuth!==auth&&(i.isAuth=auth,a.isAuth=auth)},100)}})},{}]},{},[1]);