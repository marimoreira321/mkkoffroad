/*! Grunt Uglify 2019-09-04 */

!function e(t,o,n){function a(u,i){if(!o[u]){if(!t[u]){var r="function"==typeof require&&require;if(!i&&r)return r(u,!0);if(s)return s(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=o[u]={exports:{}};t[u][0].call(c.exports,function(e){return a(t[u][1][e]||e)},c,c.exports,e,t,o,n)}return o[u].exports}for(var s="function"==typeof require&&require,u=0;u<n.length;u++)a(n[u]);return a}({1:[function(e,t,o){"use strict";var n={pages:[],onRequest:!1,pageTitle:"",pageSubtitle:"",pageRoute:"",pageSearch:""},a=new Vue({el:"#pages_pane",data:n,methods:{getPages:function(){if(n.onRequest)return!1;n.onRequest=!0,$.post("/api/pages",{exec:"request_pages"},null,"json").then(function(e){"erro"in e?simpleAlert.show({message:"Houve um problema ao carregar suas páginas.."}):n.pages=e,n.onRequest=!1})},createPage:function(){if(n.onRequest||n.pageRoute.length<3)return simpleAlert.show({message:"Sua rota necessita de ao menos três caracteres!"});n.onRequest=!0,$.post("/api/pages",{exec:"create_page",page:{title:n.pageTitle,subtitle:n.pageSubtitle,route:n.pageRoute}},null,"json").then(function(e){"erro"in e?simpleAlert.show({message:"Algo deu errado.. tente novamente."}):simpleAlert.show({message:"Página criada com sucesso!",type:"success"}),n.onRequest=!1,a.getPages()})},removePage:function(){},resetForm:function(){n.pageRoute=n.pageTitle=n.pageSubtitle=""},replaceWhiteSpaces:function(e){var t=e.target.value.replace(/\s/g,"-");e.target.value=t.toLocaleLowerCase()}},created:function(){this.getPages()}}),s={albums:[],photos:[],albumId:"",cookedDeletion:"",editingPhotoIdx:"none",editingPhotoText:"",editingAlbumTitle:"none",editingAlbumDescription:"none",curAlbum:"none",fileInputs:[0],cookedAlbum:""},u=new Vue({el:"#album_pane",data:s,methods:{getAlbums:function(){$.post("api/album/update",{exec:"get_albums"},null,"json").then(function(e){if(e.err)return simpleAlert.show({message:"Houve algum problema ao buscar álbuns.."});s.albums=null,s.albums=e,u.getPhotos(0)})},getPhotos:function(e){s.fileInputs.length>1?($("#confirm_change").modal("show"),s.cookedAlbum=e):$.post("api/albums",{exec:"get_album",albumId:s.albums[e].id},null,"json").then(function(t){s.photos=null,s.photos=t,s.albumId=s.albums[e].id,s.curAlbum=s.albums[e],s.curAlbum.idx=e})},resetForm:function(){s.fileInputs=[0],$($("input[type=file]")[1]).parent("label").removeClass("d-none"),$($("input[type=file]")[1]).val(""),this.getPhotos(s.cookedAlbum)},deletePhoto:function(){null!=s.cookedDeletion&&$.post("api/album/update",{exec:"delete_photo",id:s.photos[s.cookedDeletion].id},null,"json").then(function(e){var t="warn";e.err||(t="success",s.photos.splice(s.cookedDeletion,1)),simpleAlert.show({message:e.res,type:t})})},saveTitle:function(){$.post("api/album/update",{exec:"update_album_title",name:s.curAlbum.name,id:s.curAlbum.id},null,"json").then(function(e){var t="warn";e.err||(t="success",s.albums[s.curAlbum.idx].name=s.curAlbum.name,s.editingAlbumTitle="none"),simpleAlert.show({message:e.res,type:t})})},saveDescription:function(){$.post("api/album/update",{exec:"update_photo_description",id:s.photos[s.editingPhotoIdx].id,description:s.editingPhotoText},null,"json").then(function(e){var t="warn";e.err||(t="success",s.photos[s.editingPhotoIdx].desc=s.editingPhotoText,s.editingPhotoText="",s.editingPhotoIdx="none"),simpleAlert.show({message:e.res,type:t})})},insertPhotosToAlbum:function(e){var t=$(e.target).parent("form")[0],o=new FormData(t);$.ajax({url:"api/album/update",data:o,type:"POST",contentType:!1,processData:!1,success:function(e){var t="warn";e.err||(t="success",s.cookedAlbum=s.curAlbum.idx,u.resetForm()),simpleAlert.show({message:e.res,type:t})}})},addPhotoToCurrentAlbum:function(e){var t=e.target,o={url:URL.createObjectURL(t.files[0]),desc:"Envie as fotos para alterar a descrição.",album:"null",id:null};s.fileInputs.push(s.fileInputs.length),s.photos.push(o),$(t).parent("label").addClass("d-none")},updateAlbumDescription:function(){$.post("api/album/update",{exec:"update_album_description",id:s.curAlbum.id,description:s.curAlbum.desc},null,"json").then(function(e){var t="warn";e.err||(t="success",s.albums[s.curAlbum.idx].desc=s.curAlbum.desc,s.editingAlbumDescription="none"),simpleAlert.show({message:e.res,type:t})})},updateThumbnail:function(e){var t=e.target,o=new FormData;o.append("thumb",t.files[0]),o.append("exec","update_album_thumbnail"),o.append("albumId",s.curAlbum.id),$("#album-thumbnail img").attr("src","assets/loading.gif"),$.ajax({url:"api/album/update",data:o,type:"POST",contentType:!1,processData:!1,success:function(e){var o="warn";e.err||(o="success",s.albums[s.curAlbum.idx].thumb=e.path,$("#album-thumbnail img").attr("src",URL.createObjectURL(t.files[0]))),simpleAlert.show({message:e.res,type:o})}})}},created:function(){this.getAlbums()}});new Vue({el:"#album_modal",data:{},methods:{deletePhoto:function(){u.deletePhoto()}}}),new Vue({el:"#confirm_change",data:{},methods:{resetForm:function(){u.resetForm()}}})},{}]},{},[1]);